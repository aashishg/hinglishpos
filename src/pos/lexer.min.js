var re={url:/\b(?:(?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,number:/[0-9]*\.[0-9]+|[0-9]+/ig,space:/\s+/ig,unblank:/\S/,punctuation:/[\/\.\,\?\!]/ig};function LexerNode(c,f,e){this.string=c;this.children=[];if(c){this.matches=c.match(f);var g=c.split(f)}if(!this.matches){this.matches=[];var g=[c]}if(!e.length){this.children=g}else{var b=e[0],a=e.slice(1);for(var d in g){this.children.push(new LexerNode(g[d],b,a))}}}LexerNode.prototype.fillArray=function(d){for(var b in this.children){var c=this.children[b];if(c.fillArray){c.fillArray(d)}else{if(re.unblank.test(c)){d.push(c)}}if(b<this.matches.length){var a=this.matches[b];if(re.unblank.test(a)){d.push(a)}}}};LexerNode.prototype.toString=function(){var a=[];this.fillArray(a);return a.toString()};function Lexer(){this.regexs=[re.url,re.number,re.space,re.punctuation]}Lexer.prototype.lex=function(a){var c=[],b=new LexerNode(a,this.regexs[0],this.regexs.slice(1));b.fillArray(c);return c};